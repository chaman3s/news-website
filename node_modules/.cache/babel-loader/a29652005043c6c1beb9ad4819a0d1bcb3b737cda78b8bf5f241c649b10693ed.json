{"ast":null,"code":"import React,{useEffect,useState}from'react';import NewsItem from'./NewsItem';import Spinner from'./Spinner';import InfiniteScroll from\"react-infinite-scroll-component\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const News=props=>{const[articles,setArticles]=useState([]);const[loading,setLoading]=useState(true);const[page,setPage]=useState(1);const[totalResults,setTotalResults]=useState(0);const capitalizeFirstLetter=string=>{return string.charAt(0).toUpperCase()+string.slice(1);};const updateNews=async()=>{props.setProgress(10);const url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=\").concat(props.apiKey,\"&page=\").concat(page,\"&pageSize=\").concat(props.pageSize);setLoading(true);let data=await fetch(url);props.setProgress(30);let parsedData=await data.json();console.log(parsedData);props.setProgress(70);setArticles(parsedData.articles);setTotalResults(parsedData.totalResults);setLoading(false);props.setProgress(100);};useEffect(()=>{document.title=\"\".concat(capitalizeFirstLetter(props.category),\" - NewsMonkey\");updateNews();// eslint-disable-next-line\n},[]);const fetchMoreData=async()=>{console.log(\"helloo\",props.apiKey);const url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=\").concat(props.apiKey,\"&page=\").concat(page+1,\"&pageSize=\").concat(props.pageSize);setPage(page+1);let data=await fetch(url);let parsedData=await data.json();console.log(parsedData);setArticles(articles.concat(parsedData.articles));setTotalResults(parsedData.totalResults);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center\",style:{margin:'35px 0px',marginTop:'90px'},children:[\"NewsMonkey - Top \",capitalizeFirstLetter(props.category),\" Headlines\"]}),loading&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:articles.length,next:fetchMoreData,hasMore:articles.length!==totalResults,loader:/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:articles.map(element=>{return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(NewsItem,{title:element.title?element.title:\"\",description:element.description?element.description:\"\",imageUrl:element.urlToImage,newsUrl:element.url,author:element.author,date:element.publishedAt,source:element.source.name})},element.url);})})})})]});};News.defaultProps={country:'in',pageSize:8,category:'general'};export default News;","map":{"version":3,"names":["React","useEffect","useState","NewsItem","Spinner","InfiniteScroll","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","News","props","articles","setArticles","loading","setLoading","page","setPage","totalResults","setTotalResults","capitalizeFirstLetter","string","charAt","toUpperCase","slice","updateNews","setProgress","url","concat","country","category","apiKey","pageSize","data","fetch","parsedData","json","console","log","document","title","fetchMoreData","children","className","style","margin","marginTop","dataLength","length","next","hasMore","loader","map","element","description","imageUrl","urlToImage","newsUrl","author","date","publishedAt","source","name","defaultProps"],"sources":["/home/chaman/project/newsapp/src/component/News.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\n\nimport NewsItem from './NewsItem'\nimport Spinner from './Spinner';\nimport PropTypes from 'prop-types'\nimport InfiniteScroll from \"react-infinite-scroll-component\";\n\nconst News = (props)=>{\n    const [articles, setArticles] = useState([]);\n    const [loading, setLoading] = useState(true)\n    const [page, setPage] = useState(1)\n    const [totalResults, setTotalResults] = useState(0)\n    \n    const capitalizeFirstLetter = (string) => {\n        return string.charAt(0).toUpperCase() + string.slice(1);\n    } \n\n    const updateNews = async ()=> {\n        props.setProgress(10);\n        const url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.apiKey}&page=${page}&pageSize=${props.pageSize}`; \n        setLoading(true)\n        let data = await fetch(url);\n        props.setProgress(30);\n        let parsedData = await data.json()\n        console.log(parsedData);\n        props.setProgress(70);\n        setArticles(parsedData.articles)\n        setTotalResults(parsedData.totalResults)\n        setLoading(false)\n        props.setProgress(100);\n    }\n\n    useEffect(() => {\n        document.title = `${capitalizeFirstLetter(props.category)} - NewsMonkey`;\n        updateNews(); \n        // eslint-disable-next-line\n    }, [])\n\n\n    const fetchMoreData = async () => {   \n        console.log(\"helloo\",props.apiKey);\n        const url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.apiKey}&page=${page+1}&pageSize=${props.pageSize}`;\n        setPage(page+1) \n        let data = await fetch(url);\n        let parsedData = await data.json()\n        console.log(parsedData);\n        setArticles(articles.concat(parsedData.articles))\n        setTotalResults(parsedData.totalResults)\n      };\n \n        return (\n            <>\n                <h1 className=\"text-center\" style={{ margin: '35px 0px', marginTop: '90px' }}>NewsMonkey - Top {capitalizeFirstLetter(props.category)} Headlines</h1>\n                {loading && <Spinner />}\n                <InfiniteScroll\n                    dataLength={articles.length}\n                    next={fetchMoreData}\n                    hasMore={articles.length !== totalResults}\n                    loader={<Spinner/>}\n                > \n                    <div className=\"container\">\n                         \n                    <div className=\"row\">\n                        {articles.map((element) => {\n                            return <div className=\"col-md-4\" key={element.url}>\n                                <NewsItem title={element.title ? element.title : \"\"} description={element.description ? element.description : \"\"} imageUrl={element.urlToImage} newsUrl={element.url} author={element.author} date={element.publishedAt} source={element.source.name} />\n                            </div>\n                        })}\n                    </div>\n                    </div> \n                </InfiniteScroll>\n            </>\n        )\n    \n}\n\n\nNews.defaultProps = {\n    country: 'in',\n    pageSize: 8,\n    category: 'general',\n}\n\nNews.propTypes = {\n    country: PropTypes.string,\n    pageSize: PropTypes.number,\n    category: PropTypes.string,\n}\n\nexport default News\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}